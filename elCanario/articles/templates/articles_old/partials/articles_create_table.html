
<h1>Add Article</h1>
<div>
  <label>Name*: </label>
  <input hx-get="{% url 'articles:create_name_check' %}" type="text" hx-target="#answer_article_name" hx-trigger="keyup changed delay:200ms" hx-swap="outerHTML" name="article_name_input" id="article_name_input" required value="{{article_name_input}}">
  <div id="answer_article_name">
    <output >{{answer_error_name}}</output>
  </div>
</div>
{% for category in categories %}
    <div>
        <form action="{% url 'articles:category_update' external_link="True" cat_id=category.id %}" method="GET">
          <button ion-button icon-only type="submit">
              <ion-icon name="create-outline"></ion-icon>
          </button>
        </form>
        <label for="article_value_input">{{category.name}}: </label>
        <select id = "{{category.id}}" name="category-{{category.id}}">
            <option value=""></option>
            {% load custom_tags %}
            {% with values|filter_by_category:category as values_for_category %}
                {% for value in values_for_category %}
                <option value="{{value.id}}" {% if value.id in values_selected %} selected {% endif %}>{{value.name}}</option>
                {% endfor %}
            {% endwith %}
        </select>
        <output id="answer_category_id">{{answer_category_id}}</output>
    </div>
{% endfor %}

<div>
  <label>Buy price*: </label>
  <input type="text" name="article_buy_price_input" id="article_buy_price_input" hx-get="{% url 'articles:create_calculator' %}" hx-swap="outerHTML" hx-trigger="keyup changed delay:300ms" hx-target="#article_sell_price_output" hx-include="[name='article_increase_input']" required value="{{article_buy_price_input}}" >
</div>
<div>
  <label>Increment*: </label>
  <input type="text" name="article_increase_input" id="article_increase_input" hx-get="{% url 'articles:create_calculator' %}" hx-swap="outerHTML" hx-trigger="keyup changed delay:300ms" hx-target="#article_sell_price_output" hx-include="[name='article_buy_price_input']" required value="{{article_increase_input}}">
  <label>%</label>
</div>

{% include 'articles_create_calculator.html' %}

<div>
  <label>Stock: </label>
  <input hx-get="{% url 'articles:create_stock_check' %}" type="text" hx-target="#answer_article_stock" hx-trigger="keyup changed delay:200ms" hx-swap="outerHTML" name="article_stock_input" id="article_stock_input" value="{{article_stock_input}}" placeholder="defalut: 0">
  {% include 'articles_create_stock_check.html' %}
</div>

<div>

    <button ion-button icon-only type="submit" hx-get="{% url 'articles:create_confirm' %}" hx-trigger="click" hx-include="#article_name_input,[name^='category-'],#article_buy_price_input, #article_increase_input, #article_sell_price_input, #article_stock_input" hx-target="#article_create_answer" hx-swap="outerHTML">
        <ion-icon name="save-outline"></ion-icon>
    </button>

</div>
